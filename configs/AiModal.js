const {
    GoogleGenerativeAI,
    HarmCategory,
    HarmBlockThreshold,
} = require("@google/generative-ai");

const apiKey = process.env.EXPO_PUBLIC_GOOGLE_GEMINI_API_KEY;
const genAI = new GoogleGenerativeAI(apiKey);

const model = genAI.getGenerativeModel({
    model: "gemini-2.0-flash-exp",
});

const generationConfig = {
    temperature: 1,
    topP: 0.95,
    topK: 40,
    maxOutputTokens: 8192,
    responseMimeType: "application/json",
};


export const chatSession = model.startChat({
    generationConfig,
    history: [
        {
            role: "user",
            parts: [
                { text: "Generate Travel Plan for Location : Las Vegas, NV, USA, for 2 Days and 1 Night for A Couple with a Moderate budget with a Filght details, Flight Price with Booking url, Hotel options list with HotelName, Hotel address, Price, hotel image url, geo coordinates, rating, descriptions and Places to visit nearby with placeName, Place Details, Place Image URl, Geo Coordinates, ticket Pricing, Time to travel each of the location for 2 day and 1 night with each day plan with best time to visit in JSON format." },
            ],
        },
        {
            role: "model",
            parts: [
                { text: "Okay, here's a detailed 2-day, 1-night Las Vegas travel plan for a couple on a moderate budget, presented in JSON format as requested.  Please note that prices are estimates and can vary significantly based on booking time and availability. I'm also providing placeholder booking URLs as actual URLs are dynamic and should be checked on booking sites.\n\n```json\n{\n  \"tripDetails\": {\n    \"location\": \"Las Vegas, NV, USA\",\n    \"duration\": \"2 Days, 1 Night\",\n    \"budget\": \"Moderate\",\n    \"travelers\": \"Couple\"\n  },\n  \"flightDetails\": {\n    \"exampleFlight\": {\n      \"from\": \"Your Origin City\",\n      \"to\": \"Las Vegas (LAS)\",\n      \"priceRange\": \"200-500/person\",\n      \"bookingUrl\": \"https://www.exampleflightbooking.com\",\n      \"note\": \"Flight prices vary significantly. Use flight aggregator sites to find the best deal from your origin city. This is just a placeholder URL.\"\n     }\n  },\n  \"hotelOptions\": [\n    {\n        \"hotelName\": \"The LINQ Hotel + Experience\",\n        \"hotelAddress\": \"3535 S Las Vegas Blvd, Las Vegas, NV 89109\",\n        \"priceRange\": \"100-250/night\",\n        \"hotelImageURL\": \"https://example.com/linq_hotel_image.jpg\",\n       \"geoCoordinates\": {\n         \"latitude\": 36.1169,\n         \"longitude\": -115.1718\n       },\n        \"rating\": 4.0,\n        \"description\": \"Modern hotel in the center of the Strip, featuring the High Roller observation wheel and a lively promenade.\",\n       \"amenities\": [\"Pool\", \"Free Wi-Fi\", \"Fitness Center\", \"Restaurants\"]\n    },\n    {\n        \"hotelName\": \"Park MGM Las Vegas\",\n        \"hotelAddress\": \"3770 S Las Vegas Blvd, Las Vegas, NV 89109\",\n        \"priceRange\": \"120-300/night\",\n        \"hotelImageURL\": \"https://example.com/parkmgm_image.jpg\",\n        \"geoCoordinates\": {\n            \"latitude\": 36.1049,\n            \"longitude\": -115.1750\n         },\n         \"rating\": 4.2,\n        \"description\": \"Stylish hotel with a focus on art and dining, featuring a variety of restaurants and a relaxed atmosphere.\",\n         \"amenities\": [\"Pool\", \"Spa\", \"Casino\", \"Restaurants\", \"Free Wi-Fi\"]\n     },\n    {\n        \"hotelName\": \"Planet Hollywood Resort & Casino\",\n        \"hotelAddress\": \"3667 S Las Vegas Blvd, Las Vegas, NV 89109\",\n        \"priceRange\": \"90-220/night\",\n        \"hotelImageURL\": \"https://example.com/planethollywood_image.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1099,\n            \"longitude\": -115.1707\n          },\n        \"rating\": 4.1,\n        \"description\": \"Movie-themed hotel with a vibrant atmosphere, known for its celebrity memorabilia and popular shows.\",\n       \"amenities\": [\"Pool\", \"Casino\", \"Live Entertainment\", \"Restaurants\"]\n    }\n  ],\n  \"itinerary\": {\n    \"day1\": {\n      \"bestTimeToVisit\": \"Afternoon/Evening\",\n      \"plan\": [\n          {\n          \"time\": \"3:00 PM\",\n           \"activity\": \"Check into your chosen hotel.\",\n            \"description\": \"Arrive at your hotel and complete check-in procedures. Leave your luggage and freshen up before heading out.\"\n          },\n        {\n          \"time\": \"4:00 PM\",\n          \"activity\": \"Explore the Las Vegas Strip\",\n           \"description\": \"Begin your exploration of the Strip. Start at the south end and make your way north. Enjoy the sights and sounds of the iconic casinos and hotels.\",\n            \"placeDetails\": {\n              \"placeName\": \"The Las Vegas Strip\",\n              \"placeImageURL\": \"https://example.com/vegas_strip_image.jpg\",\n                \"geoCoordinates\": {\n                   \"latitude\": 36.1162,\n                  \"longitude\": -115.1737\n                  },\n              \"ticketPricing\": \"Free (attractions along the Strip may have costs)\"\n            }\n        },\n        {\n          \"time\": \"6:00 PM\",\n          \"activity\": \"Dinner at a casual restaurant on the Strip\",\n           \"description\": \"Choose a casual eatery along the Strip for dinner. Several options are available with moderate prices. Consider a buffet for variety.\",\n           \"foodOption\": {\n               \"description\":\"Choose any restaurant along the strip and enjoy. Variety available.\",\n                \"priceRange\": \"20-50/person\"\n            }\n        },\n        {\n          \"time\": \"7:30 PM\",\n          \"activity\": \"Bellagio Fountains Show\",\n           \"description\": \"Watch the Bellagio Fountains show, a must-see spectacle of water, music, and light.\",\n            \"placeDetails\": {\n              \"placeName\": \"Bellagio Fountains\",\n             \"placeImageURL\": \"https://example.com/bellagio_fountains_image.jpg\",\n                \"geoCoordinates\": {\n                  \"latitude\": 36.1125,\n                  \"longitude\": -115.1737\n                 },\n              \"ticketPricing\": \"Free\",\n                 \"showTimes\": \"Multiple shows in the evening, check the schedule beforehand.\"\n            }\n        },\n        {\n          \"time\": \"9:00 PM\",\n          \"activity\": \"Walk the Strip and Enjoy Casino Atmopshere\",\n           \"description\": \"Explore more of the strip and if your heart desires, maybe try some slots or a table game.\",\n          \"placeDetails\": {\n              \"placeName\":\"Casino at the hotel\",\n              \"description\":\"Try your hand at casino games and enjoy the night life\",\n               \"ticketPricing\":\"Variable\"\n          }\n        },\n           {\n          \"time\": \"11:00 PM\",\n           \"activity\": \"Return to hotel or rest of your leisure.\",\n             \"description\":\"Enjoy your hotel amenities or have a good night rest\"\n          }\n      ]\n    },\n      \"day2\": {\n        \"bestTimeToVisit\": \"Morning/Afternoon\",\n        \"plan\": [\n         {\n           \"time\":\"9:00 AM\",\n           \"activity\":\"Breakfast at a cafe.\",\n           \"description\": \"Grab a breakfast at a cafe near your hotel.\",\n           \"foodOption\": {\n             \"description\":\"Choose any nearby cafe.\",\n              \"priceRange\":\"10-20/person\"\n           }\n         },\n          {\n            \"time\": \"10:00 AM\",\n            \"activity\": \"Visit the High Roller Observation Wheel\",\n            \"description\": \"Experience the High Roller for panoramic views of Las Vegas and the Strip. Pre-book tickets online to save time.\",\n              \"placeDetails\": {\n              \"placeName\": \"High Roller Observation Wheel\",\n                \"placeImageURL\": \"https://example.com/high_roller_image.jpg\",\n              \"geoCoordinates\": {\n                 \"latitude\": 36.1167,\n                 \"longitude\": -115.1699\n               },\n              \"ticketPricing\": \"Approx 25-35/person\",\n              \"timeToTravel\": \"Located at LINQ Promenade, accessible by walking. \",\n                \"duration\":\"Approx. 30 mins ride\"\n            }\n          },\n         {\n          \"time\": \"12:00 PM\",\n           \"activity\": \"Lunch at the LINQ Promenade\",\n           \"description\": \"Have lunch at one of the many eateries at the LINQ Promenade\",\n            \"foodOption\":{\n              \"description\":\"Varied food option at the LINQ promenade\",\n              \"priceRange\": \"15-30/person\"\n            }\n         },\n          {\n            \"time\": \"1:30 PM\",\n            \"activity\": \"Explore Fremont Street Experience\",\n            \"description\": \"Visit the vibrant Fremont Street Experience in downtown Las Vegas for another unique Las Vegas vibe.\",\n            \"placeDetails\": {\n                \"placeName\": \"Fremont Street Experience\",\n               \"placeImageURL\": \"https://example.com/fremont_street_image.jpg\",\n                 \"geoCoordinates\": {\n                   \"latitude\": 36.1699,\n                   \"longitude\": -115.1402\n                  },\n                \"ticketPricing\": \"Free (attractions and shows along the street may have costs)\",\n                 \"timeToTravel\": \"Approximately 20-30 minutes by taxi/rideshare from the Strip. Check bus options.\"\n            }\n        },\n        {\n           \"time\":\"3:30 PM\",\n           \"activity\":\"Depart from Las Vegas.\",\n            \"description\":\"Head to airport for your departure.\"\n        }\n      ]\n    }\n  }\n}\n```\n**Important Notes:**\n*  **Pricing:** Prices are estimated and can fluctuate. Always book in advance for best rates, especially for flights and hotels.\n*  **Booking URLs:**  The provided booking URLs are placeholders. Use real flight and hotel booking websites.\n* **Transportation:**  Consider using ridesharing services or taxis for convenience between locations, but walking along the Strip is enjoyable. The bus system is also an option for budget-conscious travelers.\n*  **Flexibility:** This is a suggested itinerary, feel free to customize it to your interests.  Consider what's your priority for your short trip.\n* **Reservations:** Consider making reservations for dinner and any shows in advance, especially during peak season.\n* **Hydration:** Vegas is in the desert, stay well hydrated.\n* **Safety:** Be aware of your surroundings, especially at night, and keep an eye on your belongings.\n\nThis should give you a great start to planning your quick Vegas getaway! Have a wonderful time!\n" },
            ],
        },
    ],
});


